<!DOCTYPE html>

<html>

    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>User Info</title>
        <link rel="icon" type="image/x-icon" href="../assets/images/favicon.png">
        <link rel='stylesheet' href='../css/style.css'>
        <link rel='stylesheet' href='../css/user.css'>
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    </head>

    <body>
        <header class="header">
            <nav>
                <div class="hamburger-menu" id="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </header>
        <div class="side-panel" id="side-panel">
            <h2>Menu</h2>
            <a href="main.html">System</a>
            <a href="../index.html" onclick="logOutButton(this)">Logout</a>
            <a href="contact.html" target="_blank">Contact</a>
        </div>
        <div class="overlay" id="overlay"></div>

        <section id="user-info-section">
            <div id="user-info">
                <h2>User Information</h2>
                <p><strong>ID:</strong> <span id="user-id"></span></p>
                <p><strong>Name:</strong> <span id="user-name"></span></p>
                <p><strong>Email:</strong> <span id="user-email"></span></p>
                <p><strong>Registration Date:</strong> <span id="user-registration-date"></span></p>
                
                <!-- Password Change Section -->
                <button id="toggle-password-change-btn">Change Password</button>

                <!-- Password change form, initially hidden -->
                <div id="change-password-container" class="form-container">
                    <form id="change-password-form">
                        <div class="form-group">
                            <label for="current-password">Current Password:</label>
                            <input type="password" id="current-password" name="current-password" required>
                        </div>

                        <div class="form-group">
                            <label for="new-password">New Password:</label>
                            <input type="password" id="new-password" name="new-password" required>
                        </div>

                        <div class="form-group">
                            <label for="confirm-password">Confirm New Password:</label>
                            <input type="password" id="confirm-password" name="confirm-password" required>
                        </div>

                        <button type="submit">Change Password</button>
                    </form>
                    <p id="password-change-message" class="message"></p>
                </div>

                <!-- Email Change Section -->
                <button id="toggle-email-change-btn">Change Email</button>

                <!-- Email change form, initially hidden -->
                <div id="change-email-container" class="form-container">
                    <form id="change-email-form">
                        <div class="form-group">
                            <label for="current-password-email">Password:</label>
                            <input type="password" id="current-password-email" name="current-password-email" required>
                        </div>

                        <div class="form-group">
                            <label for="new-email">New Email:</label>
                            <input type="email" id="new-email" name="new-email" required>
                        </div>

                        <button type="submit">Change Email</button>
                    </form>
                    <p id="email-change-message" class="message"></p>
                </div>

                <!-- Delete Account Section -->
                <button id="toggle-delete-account-btn">Delete Account</button>

                <!-- Delete account form, initially hidden -->
                <div id="delete-account-container" class="form-container">
                    <form id="delete-account-form">
                        <div class="form-group">
                            <label for="delete-confirm-password">Enter Password to Confirm:</label>
                            <input type="password" id="delete-confirm-password" name="delete-confirm-password" required>
                        </div>

                        <div class="confirmation-text">
                            <p>⚠️ This action cannot be undone. Your account and all associated data will be permanently deleted.</p>
                        </div>

                        <button type="submit">Permanently Delete Account</button>
                    </form>
                    <p id="delete-account-message" class="message"></p>
                </div>
            </div>
        </section>

        <script src="../js/configs.js"></script>
        <script src="../js/header.js"></script>
        <script src="../js/api.js"></script>
        <script src="../js/logout.js"></script>
        <script src="../js/user.js"></script>
    </body>
</html>