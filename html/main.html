<!DOCTYPE html>

<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">  
        <title> Jarvis</title>
        <link rel="icon" type="image/x-icon" href="../assets/images/favicon.png">
        <link rel='stylesheet' href='../css/space_box_style.css'>
        <link rel='stylesheet' href='../css/available_devices_box_style.css'>    
        <link rel='stylesheet' href='../css/style.css'> 
        <link rel='stylesheet' href='../css/device_style.css'>
        <link rel='stylesheet' href="../css/drag_and_drop.css">
        <link rel='stylesheet' href="../css/tap_and_drop.css">
        <link rel='stylesheet' href="../css/dropdown-menu-style.css">
        <link rel='stylesheet' href="../css/control-device-animation.css">
        <link rel='stylesheet' href="../css/floating-buttons.css">
        <link rel='stylesheet' href="../css/device-history-plot.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        
    </head>

    <body>
        <div class="side-panel" id="side-panel">
            <h2>Menu</h2>
            <a href="main.html"><i class="material-icons icon">home</i>Home</a>
            <a href="surveillance.html"><i class="material-icons icon">visibility</i>Cameras</a>
            <a href="user.html"><i class="material-icons icon" >account_circle</i>User</a>
            <a href="../index.html" onclick="logOutButton(this)"><i class="material-icons icon" >logout</i>Logout</a>
            <a href="contact.html" target="_blank"><i class="material-icons icon" >import_contacts</i>Contact</a>
        </div>
        <div class="overlay" id="overlay"></div>

        <section>
            <div id="space-box">
                    <div id="space-box-title">
                        <h1 id="space-box-name" class="space-options" onclick="toggleSpaceMenu(event, this)"></h1>
                    </div>
                    <ul class="space-dropdown-menu">
                        <li onclick="renameAreaBtn(this)">Rename Area</li>
                        <li onclick="addRoom()">Add Room</li>
                        <li onclick="getHubInfo()">Hub Info</li>
                    </ul>
                    
                    <div id="rooms-box">
                        
                    </div>
                    
                    <p id="refresh-time">Last refresh:</p>
            </div>
        </section>

        <section>
            <div id=available-devices-box>

                <div id="available-devices-box-title">
                    <h2>Available Devices</h2>
                </div>

                <div id="devicelist">

                    <div class="device-category" id="environmental">
                        <div class="category-title">Enviromental</div>
                
                    </div>

                    <div class="device-category" id="security">
                        <div class="category-title">Security</div>
                
                    </div>

                    <div class="device-category" id="control">
                        <div class="category-title">Control</div>
                
                    </div>

                    <div class="device-category" id="miscellaneous">
                        <div class="category-title">Miscellaneous</div>
                
                    </div>

                </div>



            </div>
        </section>

        <div id="history-modal" class="modal">
            <div class="modal-content">
              <div id="history-plot"></div>
              <div id="history-controls">
                  <label for="time-window">Time Window (hours): </label>
                  <input id="time-window" type="range" min="1" max="48" value="1" oninput="updateHistoryPlot(this)">
                  <span id="time-window-value">1</span> hours
                  <span class="close-button" onclick="closeHistoryModal()">&times;</span>
              </div>
            </div>
          </div>

        <section id="floating-menu">
            <div class="hamburger-menu" id="hamburger-menu">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <button class="floating-btn" id="refresh" onclick="refreshData(event, this)">
                <i class="material-icons icon">refresh</i>
            </button>
        </section>

        <template id="room-template">
            <div class="room", id="room-id">
                <div class="room-header">
                    <div class="room-title">Room Name</div> <!-- Centered title -->
                    <div class="room-options" onclick="toggleRoomMenu(event, this)">▼</div> <!-- Right-aligned icon -->
                </div>
                <ul class="room-dropdown-menu">
                    <li onclick="renameRoom(this)">Rename Room</li>
                    <li onclick="removeRoom(this)">Remove Room</li>
                </ul>
                <div class="room-devices"></div>
            </div>
        </template>

        <template id="device-template">
            <div class="device tooltip draggable", id="device-id" data-type="device-type">
                <div class="device-metadata">
                    <div class="description-tooltip">Place device description here</div>
                    <div class="nickname-tooltip">&#8226 Nickname: </div>
                    <div class="id-tooltip">&#8226 Id: </div>
                    <div class="time-tooltip"></div>
                </div>
                <div class="device-content">
                    <div class="device-type">Place icon here</div>
                    <div class="device-data-state">
                        <div class="device-state"></div>
                        <div class="device-data"></div>
                    </div>
                </div>
                <!-- Control device button -->
                <div class="control-device-btn material-icons" onclick="commandDeviceButton(event, this)">play</div>
                <!-- Dropdown toggle button for device options -->
                <div class="device-options" onclick="toggleDeviceMenu(event, this)">⋮</div>
                <!-- Dropdown menu -->
                <ul class="device-dropdown-menu">
                    <li onclick="renameDevice(event, this)">Rename Device</li>
                    <li onclick="showHistory(event, this)">Show History</li>
                </ul>
                <div class="warning-icon">⚠️</div>
            </div>
        </template>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <script src="../js/configs.js"></script>
        <script src="../js/floating-menu.js"></script>
        <script src="../js/api.js"></script>
        <script src="../js/drag_and_drop.js"></script>
        <script src="../js/tap_and_drop.js"></script>
        <script src="../js/dropdown-menu.js"></script>
        <script src="../js/control_device.js"></script>
        <script src="../js/device-history-plot.js"></script>
        <script src='../js/main.js'></script>
        <script src='../js/logout.js'></script>

    </body>

</html>