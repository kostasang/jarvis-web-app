<!DOCTYPE html>

<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">  
        <title> Jarvis</title>
        <link rel="icon" type="image/x-icon" href="../assets/images/favicon.png">
        <link rel='stylesheet' href='../css/space_box_style.css'>
        <link rel='stylesheet' href='../css/available_sensors_box_style.css'>    
        <link rel='stylesheet' href='../css/style.css'> 
        <link rel='stylesheet' href='../css/sensor_style.css'>
        <link rel='stylesheet' href="../css/drag_and_drop.css">
        <link rel='stylesheet' href="../css/tap_and_drop.css">
        <link rel='stylesheet' href="../css/dropdown-menu-style.css">
        <link rel='stylesheet' href="../css/control-device-animation.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
        
    </head>

    <body>
        <header class="header">
            <nav>
                <div class="hamburger-menu" id="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </nav>
        </header>
        <div class="side-panel" id="side-panel">
            <h2>Menu</h2>
            <a href="user.html"><i class="material-icons icon" >account_circle</i>User</a>
            <a href="../index.html" onclick="logOutButton(this)"><i class="material-icons icon" >logout</i>Logout</a>
            <a href="contact.html" target="_blank"><i class="material-icons icon" >import_contacts</i>Contact</a>
        </div>
        <div class="overlay" id="overlay"></div>

        <section>
            <div id="space-box">
                    <div id="space-box-title">
                        <h1>Space Overview</h1>
                    </div>
                    
                    <div id="rooms-box">
                        
                    </div>

                    <div id="space-box-func">
                        <button id="new-room-btn" onclick="addRoom()">
                            +
                        </button>
                        <button class="material-icons" id="refresh-btn" onclick="refreshData()">
                            refresh
                        </button>
                    </div>
                    
                    <p id="refresh-time">Last refresh:</p>
            </div>
        </section>

        <section>
            <div id=available-sensors-box>

                <div id="available-sensors-box-title">
                    <h2>Available Sensors</h2>
                </div>

                <div id="sensorlist">

                    <div class="sensor-category" id="environmental">
                        <div class="category-title">Enviromental</div>
                
                    </div>

                    <div class="sensor-category" id="security">
                        <div class="category-title">Security</div>
                
                    </div>

                    <div class="sensor-category" id="control">
                        <div class="category-title">Control</div>
                
                    </div>

                    <div class="sensor-category" id="miscellaneous">
                        <div class="category-title">Miscellaneous</div>
                
                    </div>

                </div>



            </div>
        </section>

        <template id="room-template">
            <div class="room", id="room-id">
                <div class="room-header">
                    <div class="room-title">Room Name</div> <!-- Centered title -->
                    <div class="room-options" onclick="toggleRoomMenu(event, this)">▼</div> <!-- Right-aligned icon -->
                </div>
                <ul class="room-dropdown-menu">
                    <li onclick="renameRoom(this)">Rename Room</li>
                    <li onclick="removeRoom(this)">Remove Room</li>
                </ul>
                <div class="room-sensors"></div>
            </div>
        </template>

        <template id="sensor-template">
            <div class="sensor tooltip draggable", id="sensor-id" data-type="sensor-type">
                <div class="sensor-metadata">
                    <div class="description-tooltip">Place device description here</div>
                    <div class="nickname-tooltip">&#8226 Nickname: </div>
                    <div class="id-tooltip">&#8226 Id: </div>
                    <div class="time-tooltip"></div>
                </div>
                <div class="sensor-content">
                    <div class="sensor-type">Place icon here</div>
                    <div class="sensor-data-state">
                        <div class="sensor-state"></div>
                        <div class="sensor-data"></div>
                    </div>
                </div>
                <!-- Control sensor button -->
                <div class="control-sensor-btn material-icons" onclick="commandDeviceButton(event, this)">play</div>
                <!-- Dropdown toggle button for sensor options -->
                <div class="sensor-options" onclick="toggleSensorMenu(event, this)">⋮</div>
                <!-- Dropdown menu -->
                <ul class="sensor-dropdown-menu">
                    <li onclick="renameSensor(event, this)">Rename Sensor</li>
                    <li onclick="showHistory(event, this)">Show History</li>
                </ul>
                <div class="warning-icon">⚠️</div>
            </div>
        </template>

        <script src="../js/configs.js"></script>
        <script src="../js/header.js"></script>
        <script src="../js/api.js"></script>
        <script src="../js/drag_and_drop.js"></script>
        <script src="../js/tap_and_drop.js"></script>
        <script src="../js/dropdown-menu.js"></script>
        <script src="../js/control_sensor.js"></script>
        <script src='../js/main.js'></script>
        <script src='../js/logout.js'></script>

    </body>

</html>